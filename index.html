<script>
  const btnRow  = document.getElementById('btnRow');
  const yesBtn  = document.getElementById('yesBtn');
  const noBtn   = document.getElementById('noBtn');
  const success = document.getElementById('success');

  function moveNoButton() {
    // Work ONLY within btnRow so it never vanishes
    const area = btnRow.getBoundingClientRect();
    const noR  = noBtn.getBoundingClientRect();
    const yesR = yesBtn.getBoundingClientRect();

    // padding inside the area
    const pad = 10;

    // Coordinates relative to btnRow (0..width/height)
    const maxX = Math.max(pad, area.width - noR.width - pad);
    const maxY = Math.max(pad, area.height - noR.height - pad);

    // Safe zone around YES (relative to btnRow)
    const safePad = 16;
    const safeLeft   = (yesR.left - area.left) - safePad;
    const safeTop    = (yesR.top  - area.top)  - safePad;
    const safeRight  = (yesR.right - area.left) + safePad;
    const safeBottom = (yesR.bottom - area.top) + safePad;

    function overlapsYes(x, y) {
      const noLeft = x, noTop = y;
      const noRight = x + noR.width;
      const noBottom = y + noR.height;
      return !(noRight < safeLeft || noLeft > safeRight || noBottom < safeTop || noTop > safeBottom);
    }

    // Try several random spots until we find one that doesn't overlap YES
    for (let i = 0; i < 30; i++) {
      const x = Math.floor(Math.random() * (maxX - pad + 1)) + pad;
      const y = Math.floor(Math.random() * (maxY - pad + 1)) + pad;
      if (!overlapsYes(x, y)) {
        noBtn.style.left = x + "px";
        noBtn.style.top  = y + "px";
        noBtn.style.right = "auto"; // stop using right-based position after first move
        return;
      }
    }

    // Fallback: put it bottom-right inside the area
    noBtn.style.left = maxX + "px";
    noBtn.style.top  = maxY + "px";
    noBtn.style.right = "auto";
  }

  // Run away on hover (desktop)
  noBtn.addEventListener('mouseenter', moveNoButton);

  // Run away on touch (mobile)
  noBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    moveNoButton();
  }, { passive:false });

  // If user tries to click it, it runs away (does NOT vanish)
  noBtn.addEventListener('click', (e) => {
    e.preventDefault();
    moveNoButton();
  });

  // YES shows the success message + GIF
  yesBtn.addEventListener('click', () => {
    btnRow.classList.add('hidden');
    success.classList.remove('hidden');
  });
</script>
